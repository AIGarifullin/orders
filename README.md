# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ orders

–¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç: –º–∏–Ω–∏-—Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∑–∞–∫–∞–∑–æ–≤

## –°—Ç–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞

Python, Django REST Framework, HTTPS, PostgreSQL, Postman

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

üí° –í–ï–†–°–ò–Ø Python 3.10

C–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python3 -m venv venv

```

* –ï—Å–ª–∏ —É –≤–∞—Å Linux/macOS

    ```bash
    source venv/bin/activate
    ```

* –ï—Å–ª–∏ —É –≤–∞—Å Windows (–≤ Git Bash)

    ```bash
    source venv/Scripts/activate
    ```

```bash
python3 -m pip install --upgrade pip
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt:

```bash
pip install -r requirements.txt
```

–í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
python3 manage.py migrate
```

–°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
python3 manage.py createsuperuser
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:

```bash
python3 manage.py runserver
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

* **Swagger UI**: [http://localhost:8000/schema/swagger/](http://localhost:8000/schema/swagger/)
* **ReDoc**: [http://localhost:8000/schema/redoc/](http://localhost:8000/schema/redoc/)

## API –º–∞—Ä—à—Ä—É—Ç—ã

### üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤

**POST** [http://localhost:8000/api/orders/upload/](http://localhost:8000/api/orders/upload/)

–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞–∫–∞–∑–∞ —Å —Ç–µ–º –∂–µ `order_number` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "user": "test_seller",
  "orders": [
    {
      "order_number": "12345",
      "created_at": "2025-11-12T10:00:00Z",
      "total_amount": 2500.00,
      "status": "delivered",
      "items": [
        {
          "sku": "tea01",
          "name": "–ß–∞–π –∑–µ–ª—ë–Ω—ã–π",
          "quantity": 2,
          "price": 500
        },
        {
          "sku": "cup01", 
          "name": "–ß–∞—à–∫–∞ —Ñ–∞—Ä—Ñ–æ—Ä–æ–≤–∞—è",
          "quantity": 1,
          "price": 1500
        }
      ]
    }
  ]
}
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç** (201 Created):

```json
{
  "message": "–ó–∞–∫–∞–∑—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã.",
  "statistics": {
    "created_orders": 1,
    "updated_orders": 0,
    "created_items": 2
  }
}
```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤

**GET** [http://localhost:8000/api/orders/stats/?user=test_seller](http://localhost:8000/api/orders/stats/?user=test_seller)

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∑–∞–∫–∞–∑–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `user` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç** (200 OK):

```json
{
  "user": "test_seller",
  "orders_count": 10,
  "total_revenue": 12345.67,
  "avg_order_value": 1234.57
}
```

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**`User` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**

* `username` - —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**`Order` (–ó–∞–∫–∞–∑)**

* `user` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* `order_number` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
* `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
* `total_amount` - –æ–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
* `status` - —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

**`OrderItem` (–¢–æ–≤–∞—Ä –∑–∞–∫–∞–∑–∞)**

* `order` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑
* `sku` - –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞
* `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
* `quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
* `price` - —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞

## Pre-commit

–î–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `pre-commit`. –î–∞–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `PEP8`, –∑–∞—â–∏—Ç–∏—Ç—å –≤–µ—Ç–∫–∏ master –∏ develop –æ—Ç –Ω–µ–ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –Ω–∞–ª–∏—á–∏–µ trailing spaces.

`Pre-commit` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª `.pre-commit-config.yaml`. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É –∏–∑ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
pip install pre-commit==3.6.0
```

–∏–ª–∏

```bash
pip install -r requirements.txt
```

–î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:

```bash
pre-commit run --all-files
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—É–¥—É—Ç —Å–∫–∞—á–∞–Ω—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ö—É–∫–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ.

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∫–æ–º–∞–Ω–¥–æ–π:

```bash
pre-commit install
```
